{% extends './base_template.html' %}

{% load static %}
{% block css_additional %}
    <link rel="stylesheet" href="{% static 'business/css/account_page.css' %}">
    <link rel="stylesheet" href="{% static 'business/css/include_css/account_page/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'business/css/main_account_page.css' %}">
    <link rel="stylesheet" href="{% static 'business/css/include_css/main_account_page/change_password_popup.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
          rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
{% endblock %}

{% block js_additional %}
    <script src="{% static 'business/js/main_account_page/show_popup_password.js' %}"></script>
    <script src="{% static 'business/js/main_account_page/change_user_full_name_form.js' %}"></script>
    <script src="{% static 'business/js/main_account_page/change_user_email_form.js' %}"></script>
{% endblock %}

{% block body %}
    <section id="main">
        <div class="content">
            <div class="navbar-container">
                {% include './_includes/account_page/navbar.html' %}
            </div>
            <div class="rest-container">
                <div class="main-profile-info-section">
                    <span class="avatar">
                        <svg class="tw-icon-svg"
                             viewBox="0 0 24 24"
                             fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  clip-rule="evenodd"
                                  d="M8.5 9.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0zM12 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z" fill="currentColor">
                            </path>
                            <path fill-rule="evenodd"
                                  clip-rule="evenodd"
                                  d="M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm11-9a9 9 0 0 0-8.31 12.46c2.759-.976 5.53-1.467 8.31-1.467 2.78 0 5.552.491 8.312 1.465A9 9 0 0 0 12 3zm7.323 14.233c-2.45-.829-4.89-1.24-7.323-1.24-2.432 0-4.872.411-7.322 1.241A8.989 8.989 0 0 0 12 21a8.988 8.988 0 0 0 7.323-3.767z" fill="currentColor">
                            </path>
                        </svg>
                    </span>
                    <h4 class="user-full-name">
                        {{ full_name }}
                    </h4>
                    <p class="user-email">
                        {{ user.email }}
                    </p>
                </div>
                <div class="personal-data">
                    <h6 class="title">
                        Особисті дані
                    </h6>
                </div>
                <div class="table-data">
                    <div class="row">
                        <span class="point-desc">
                            Повне ім'я
                        </span>
                        <span class="point-value" id="user-name">
                            {{ full_name }}
                        </span>
                        <a href="#" class="change-href" id="change-user-full-name">Змінити</a>
                        <div class="form-container hidden-form">
                            <form id="change-name-form" method="post" action="{% url 'change_user_name' user.owner_id %}">
                                {% csrf_token %}
                                {% for field in change_full_name_form %}
                                    <div class="field-group">
                                        <label class="hidden-form-label">{{ field.label }}</label>
                                        {{ field }}
                                        <span class="input-field-icon">
                                            <svg class="tw-icon-svg"
                                                 viewBox="0 0 24 24"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd"
                                                      clip-rule="evenodd"
                                                      d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm4.786-13.786L13 12l3.786 3.786a.69.69 0 0 1 0 1 .771.771 0 0 1-.5.214.772.772 0 0 1-.5-.214L12 13l-3.786 3.786a.648.648 0 0 1-.5.214.648.648 0 0 1-.5-.214.69.69 0 0 1 0-1L11 12 7.214 8.214a.69.69 0 0 1 0-1 .69.69 0 0 1 1 0L12 11l3.786-3.786a.69.69 0 0 1 1 0 .69.69 0 0 1 0 1z"
                                                      fill="currentColor">
                                                </path>
                                            </svg>
                                        </span>
                                        <div class="errorlist error-user-name">
                                        </div>
                                    </div>
                                {% endfor %}
                                <button type="submit" class="save-btn" id="save-user-full-name">Зберегти</button>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <span class="point-desc">
                            Електронна пошта
                        </span>
                        <span class="point-value" id="user-email">
                            {{ owner.email }}
                        </span>
                        <a href="#" class="change-href" id="change-user-email">Змінити</a>
                        <div class="form-container hidden-form">
                            <form id="change-email-form" method="post" action="{% url 'change_email' user.owner_id %}">
                                {% csrf_token %}
                                {% for field in change_email_form %}
                                    <div class="field-group">
                                        <label class="hidden-form-label">{{ field.label }}</label>
                                        {{ field }}
                                        <span class="input-field-icon user-email-icon">
                                            <svg class="tw-icon-svg"
                                                 viewBox="0 0 24 24"
                                                 fill="none"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd"
                                                      clip-rule="evenodd"
                                                      d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm4.786-13.786L13 12l3.786 3.786a.69.69 0 0 1 0 1 .771.771 0 0 1-.5.214.772.772 0 0 1-.5-.214L12 13l-3.786 3.786a.648.648 0 0 1-.5.214.648.648 0 0 1-.5-.214.69.69 0 0 1 0-1L11 12 7.214 8.214a.69.69 0 0 1 0-1 .69.69 0 0 1 1 0L12 11l3.786-3.786a.69.69 0 0 1 1 0 .69.69 0 0 1 0 1z"
                                                      fill="currentColor">
                                                </path>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="errorlist error-user-email"></div>
                                {% endfor %}
                                <button type="submit" class="save-btn" id="save-user-email">Зберегти</button>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <span class="point-desc">
                            Телефон
                        </span>
                        <span class="point-value">
                            {{ owner.owner_phone_number }}
                        </span>
                        <a href="#" class="change-href">Змінити</a>
                    </div>
                </div>
                <div class="container" id="change-password-container">
                    <h6 class="title">
                        Пароль
                    </h6>
                    <p>Надійний пароль допомагає захистити ваш обліковий запис</p>
                    <a href="#" id="change-password-btn">Змінити пароль</a>
                    {% include './_includes/main_account_page/change_password_popup.html' %}
                </div>
                <div class="container" id="language-container">
                    <h6 class="title">Мова</h6>
                    <p>
                        Використовуйте обліковий запис команди на потрібній мові.
                    </p>
                    <a href="#">
                        <span>
                            <svg class="tw-icon-svg"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 1a1 1 0 0 0-2 0v1.5h-5a1 1 0 1 0 0 2h8.243c-.015 1.586-.713 3.153-2.241 4.676-.682-.678-1.2-1.365-1.565-2.057a1 1 0 0 0-1.77.931c.447.85 1.053 1.657 1.808 2.427-.935.693-2.057 1.375-3.382 2.043l.715 1.88c1.61-.802 3.015-1.658 4.192-2.574 1.382 1.075 3.082 2.07 5.072 2.995a1 1 0 0 0 .843-1.814c-1.765-.82-3.22-1.666-4.387-2.531 1.75-1.78 2.7-3.765 2.715-5.976H22a1 1 0 0 0 0-2h-5V1z"
                                      fill="currentColor"></path>
                                <path fill-rule="evenodd"
                                      clip-rule="evenodd"
                                      d="M7.89 9.145a1 1 0 0 0-.935-.644h-.769a1 1 0 0 0-.934.644l-4.186 11a1 1 0 0 0 1.869.711l.897-2.356h5.475l.897 2.359a1 1 0 0 0 1.87-.711L7.89 9.145zm.657 7.355H4.593l1.978-5.197L8.547 16.5z" fill="currentColor"></path>
                            </svg>
                        </span>
                        Українська
                    </a>
                </div>
                <div class="container" id="exit-container">
                    <h6 class="title">Вихід</h6>
                    <p>
                        Ви вийдете з цього сеансу
                    </p>
                    <a href="{% url 'logout' %}" id="logout-btn">
                        <span class="btn-icon">
                            <svg class="tw-icon-svg"
                                 viewBox="0 0 24 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 4a2 2 0 0 1 2-2h8.996a2 2 0 0 1 2 2v2a1 1 0 1 1-2 0V4H6v16h8.997v-2a1 1 0 1 1 2 0v2a2 2 0 0 1-2 2H6A2 2 0 0 1 4 20V4z"
                                      fill="currentColor">
                                </path>
                                <path d="M8.998 12a1 1 0 0 1 1-1h11.003l-1.828-1.828a1 1 0 0 1 1.414-1.415l2.827 2.829a2 2 0 0 1 0 2.828l-2.827 2.829a1 1 0 1 1-1.414-1.415L21.001 13H9.998a1 1 0 0 1-1-1z"
                                      fill="currentColor">
                                </path>
                            </svg>
                        </span>
                        Вихід
                        </a>
                </div>
            </div>
        </div>
    </section>
{% endblock %}